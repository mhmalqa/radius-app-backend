# ๐ ุชูุซูู ุดุงูู ูุฌููุน API Routes ูุงูุตูุงุญูุงุช

## ๐ ูุณุชููุงุช ุงูุตูุงุญูุงุช

### 1. ๐ค ุงููุณุชุฎุฏู ุงูุนุงุฏู (User) - Role: 0

-   ููููู ุงููุตูู ุฅูู ุจูุงูุงุชู ุงูุดุฎุตูุฉ ููุท
-   ููููู ุฅูุดุงุก ุทูุจุงุช ุฏูุน
-   ููููู ุนุฑุถ ุงูุจุซ ุงููุจุงุดุฑ (ุฅุฐุง ูุงู ูุฏูู `live_access`)
-   ููููู ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจู

### 2. ๐ฐ ุงููุญุงุณุจ (Accountant) - Role: 1

-   ุฌููุน ุตูุงุญูุงุช ุงููุณุชุฎุฏู ุงูุนุงุฏู
-   ููููู ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฏูุน
-   ููููู ูุจูู/ุฑูุถ ุทูุจุงุช ุงูุฏูุน
-   **ูุง ููููู** ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ ุฃู ุงูุณูุงูุฏุงุช ุฃู ุงูุฅุดุนุงุฑุงุช

### 3. ๐ ุงููุฏูุฑ (Admin) - Role: 2

-   ุฌููุน ุตูุงุญูุงุช ุงููุญุงุณุจ
-   ููููู ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   ููููู ุฅุฏุงุฑุฉ ุงูุณูุงูุฏุงุช (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   ููููู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ูุฌููุน ุงููุณุชุฎุฏููู

---

## ๐ Routes ุงูุนุงูุฉ (Public - ูุง ุชุญุชุงุฌ ูุตุงุฏูุฉ)

### 1. ุชุณุฌูู ุงูุฏุฎูู

```http
POST /api/auth/login
```

**ุงููุตู**: ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏู

**ุงูุตูุงุญูุงุช**: ุงูุฌููุน (ุบูุฑ ูุณุฌู)

**ุงููุนุงููุงุช**:

```json
{
    "username": "001",
    "password": "password123"
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ",
    "data": {
        "user": {...},
        "token": "1|xxxxxxxxxxxxx"
    }
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `401` - ุจูุงูุงุช ุงูุฏุฎูู ุบูุฑ ุตุญูุญุฉ

---

### 2. ุงูุชุณุฌูู

```http
POST /api/auth/register
```

**ุงููุตู**: ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ (ูุน ุงูุชุญูู ูู Radius)

**ุงูุตูุงุญูุงุช**: ุงูุฌููุน (ุบูุฑ ูุณุฌู)

**ุงููุนุงููุงุช**:

```json
{
    "username": "001",
    "password": "password123",
    "password_confirmation": "password123",
    "phone": "07501234567",
    "email": "user@example.com",
    "language": "ar"
}
```

**ุงูุงุณุชุฌุงุจุฉ ุงููุงุฌุญุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ",
    "data": {
        "user": {...},
        "token": "1|xxxxxxxxxxxxx"
    }
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `422` - ุงููุณุชุฎุฏู ูุณุฌู ุจุงููุนู
-   `422` - ุงุณู ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ ูู Radius
-   `422` - ุฃุฎุทุงุก ุงูุชุญูู ูู ุงูุจูุงูุงุช

**ููุงุญุธุงุช**:

-   ูุชู ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูู Radius ุฃููุงู
-   ูุชู ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ูู ุงูุชุทุจูู

---

### 3. ุนุฑุถ ุทุฑู ุงูุฏูุน

```http
GET /api/payment-methods
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ

**ุงูุตูุงุญูุงุช**: ุงูุฌููุน (ุบูุฑ ูุณุฌู)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "name": "Cash",
            "name_ar": "ููุฏู",
            "icon": "...",
            "is_active": true,
            "instructions": "..."
        }
    ]
}
```

---

### 4. ุนุฑุถ ุงูุณูุงูุฏุงุช

```http
GET /api/slides
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุงูุณูุงูุฏุงุช ุงููุดุทุฉ ูุงููุชุงุญุฉ

**ุงูุตูุงุญูุงุช**: ุงูุฌููุน (ุบูุฑ ูุณุฌู)

**ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:

-   `target_audience` - (all, active_users, expired_users)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "title": "ุนุฑุถ ุฎุงุต",
            "image_path": "...",
            "link_url": "...",
            "is_active": true
        }
    ]
}
```

---

### 5. ุนุฑุถ ุงูุจุซ ุงููุจุงุดุฑ

```http
GET /api/live-streams
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุงูุจุซ ุงููุจุงุดุฑ ุงููุดุท

**ุงูุตูุงุญูุงุช**: ุงูุฌููุน (ุบูุฑ ูุณุฌู)

**ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:

-   `category` - (match, channel, event)
-   `featured` - (true/false)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "title": "ูุจุงุฑุงุฉ ุงูููู",
            "stream_url": "...",
            "category": "match",
            "is_active": true
        }
    ]
}
```

---

## ๐ Routes ูุญููุฉ (ุชุญุชุงุฌ ูุตุงุฏูุฉ - auth:sanctum)

### ๐ฑ Auth Routes

#### 6. ุงูุญุตูู ุนูู ุงููุณุชุฎุฏู ุงูุญุงูู

```http
GET /api/auth/me
Authorization: Bearer {token}
```

**ุงููุตู**: ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ุญุงููุงู

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": {
        "id": 1,
        "username": "001",
        "phone": "07501234567",
        "role": 0,
        "live_access": false
    }
}
```

---

#### 7. ุชุณุฌูู ุงูุฎุฑูุฌ

```http
POST /api/auth/logout
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุณุฌูู ุฎุฑูุฌ ุงููุณุชุฎุฏู (ุญุฐู ุงูู token)

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ"
}
```

---

### ๐ค User Routes

#### 8. ุนุฑุถ ุงูููู ุงูุดุฎุตู

```http
GET /api/user/profile
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุงูููู ุงูุดุฎุตู ูุน ุจูุงูุงุช ุงูุงุดุชุฑุงู ุงููุญููุธุฉ

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": {
        "user": {...},
        "subscription": {
            "expiration_at": "2026-01-02 10:00:00",
            "balance": 8.00,
            "plan_name": "2M-PPP",
            "last_synced_at": "2025-12-10 09:00:00"
        }
    }
}
```

---

#### 9. ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู

```http
PUT /api/user/profile
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุญุฏูุซ ุจูุงูุงุช ุงูููู ุงูุดุฎุตู

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงููุนุงููุงุช**:

```json
{
    "phone": "07501234567",
    "email": "user@example.com",
    "language": "ar",
    "device_token": "fcm_token_here",
    "device_type": "android"
}
```

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุจูุฌุงุญ",
    "data": {...}
}
```

---

#### 10. ูุฒุงููุฉ ุงูุงุดุชุฑุงู ูู Radius

```http
POST /api/user/sync-subscription
Authorization: Bearer {token}
```

**ุงููุตู**: ูุฒุงููุฉ ุจูุงูุงุช ุงูุงุดุชุฑุงู ูู Radius ูุญูุธูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ูุฒุงููุฉ ุจูุงูุงุช ุงูุงุดุชุฑุงู ุจูุฌุงุญ",
    "data": {
        "subscription": {...}
    }
}
```

**ููุงุญุธุงุช**:

-   ูุญูุธ ุงูุจูุงูุงุช ูู `user_subscriptions` table
-   ูููู ุงุณุชุฎุฏุงููุง ูุงุญูุงู ุจุฏูู ุงูุญุงุฌุฉ ูู API

---

#### 11. ูุฑุงุกุฉ ุงูุงุดุชุฑุงู ูุจุงุดุฑุฉ ูู Radius

```http
GET /api/user/subscription-from-radius
Authorization: Bearer {token}
```

**ุงููุตู**: ุฌูุจ ุจูุงูุงุช ุงูุงุดุชุฑุงู ูุจุงุดุฑุฉ ูู Radius API ุจุฏูู ุญูุธ

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฌูุจ ุจูุงูุงุช ุงูุงุดุชุฑุงู ุจูุฌุงุญ",
    "data": {
        "subscription": {
            "expiration_at": "2026-01-02 10:00:00",
            "balance": 8.0,
            "is_online": false,
            "download_kbps": 2097152,
            "total_MB": 75688.39
        },
        "fetched_at": "2025-12-10 09:15:30",
        "source": "radius_api_direct"
    }
}
```

**ููุงุญุธุงุช**:

-   ูุง ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
-   ุจูุงูุงุช ูุญุธูุฉ ููุจุงุดุฑุฉ ูู Radius
-   ูููุฏ ุนูุฏ ุงูุญุงุฌุฉ ูุจูุงูุงุช ุฏูููุฉ (ูุซู `is_online`)

---

### ๐ณ Payment Requests Routes

#### 12. ุนุฑุถ ุทูุจุงุช ุงูุฏูุน ุงูุฎุงุตุฉ ุจู

```http
GET /api/payment-requests
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฏูุน ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:

-   `status` - (0: pending, 1: approved, 2: rejected)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "amount": 50000,
            "status": 0,
            "status_label": "ููุฏ ุงููุฑุงุฌุนุฉ",
            "created_at": "2025-12-10T09:00:00Z"
        }
    ],
    "meta": {
        "current_page": 1,
        "total": 10
    }
}
```

---

#### 13. ุฅูุดุงุก ุทูุจ ุฏูุน ุฌุฏูุฏ

```http
POST /api/payment-requests
Authorization: Bearer {token}
Content-Type: multipart/form-data
```

**ุงููุตู**: ุฅูุดุงุก ุทูุจ ุฏูุน ุฌุฏูุฏ ูุน ุฑูุน ุฅุดุนุงุฑ ุงูุฏูุน

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงููุนุงููุงุช**:

```json
{
    "amount": 50000,
    "currency": "IQD",
    "period_months": 1,
    "payment_method_id": 1,
    "transaction_number": "TXN123456",
    "receipt_file": {file},
    "payment_date": "2024-01-15"
}
```

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฅุฑุณุงู ุทูุจ ุงูุฏูุน ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "amount": 50000,
        "status": 0
    }
}
```

---

#### 14. ุนุฑุถ ุทูุจ ุฏูุน ูุญุฏุฏ

```http
GET /api/payment-requests/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุชูุงุตูู ุทูุจ ุฏูุน ูุญุฏุฏ

**ุงูุตูุงุญูุงุช**:

-   ุงููุณุชุฎุฏู: ููุท ุทูุจุงุชู ุงูุฎุงุตุฉ
-   ุงููุญุงุณุจ/ุงููุฏูุฑ: ุฌููุน ุงูุทูุจุงุช

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": {
        "id": 1,
        "amount": 50000,
        "status": 0,
        "receipt_file": "...",
        "user": {...}
    }
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `403` - ุบูุฑ ูุตุฑุญ ูู ุจุงููุตูู ุฅูู ูุฐุง ุงูุทูุจ (ูููุณุชุฎุฏููู ุงูุนุงุฏููู)

---

### ๐บ Live Streams Routes

#### 15. ุนุฑุถ ุจุซ ูุจุงุดุฑ ูุญุฏุฏ

```http
GET /api/live-streams/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุชูุงุตูู ุจุซ ูุจุงุดุฑ ูุญุฏุฏ

**ุงูุตูุงุญูุงุช**:

-   ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู
-   **ูุฌุจ ุฃู ูููู ูุฏูู `live_access = true`**

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": {
        "id": 1,
        "title": "ูุจุงุฑุงุฉ ุงูููู",
        "stream_url": "...",
        "view_count": 150
    }
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `403` - ููุณ ูุฏูู ุตูุงุญูุฉ ููุดุงูุฏุฉ ุงูุจุซ
-   `404` - ุงูุจุซ ุบูุฑ ูุชุงุญ

**ููุงุญุธุงุช**:

-   ูุชู ุฒูุงุฏุฉ `view_count` ุชููุงุฆูุงู ุนูุฏ ุงูุนุฑุถ

---

### ๐ผ๏ธ Slides Routes

#### 16. ุชุชุจุน ุงูููุฑุงุช ุนูู ุงูุณูุงูุฏ

```http
POST /api/slides/{id}/track-click
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุณุฌูู ููุฑุฉ ุนูู ุณูุงูุฏ (ูุฅุญุตุงุฆูุงุช)

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูููุฑุฉ"
}
```

---

### ๐ Notifications Routes

#### 17. ุนุฑุถ ุงูุฅุดุนุงุฑุงุช

```http
GET /api/notifications
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจุงููุณุชุฎุฏู

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:

-   `unread_only` - (true/false) - ุนุฑุถ ุบูุฑ ุงูููุฑูุกุฉ ููุท

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "title": "ุฅุดุนุงุฑ ููู",
            "body": "...",
            "is_read": false,
            "created_at": "2025-12-10T09:00:00Z"
        }
    ],
    "meta": {
        "unread_count": 5
    }
}
```

---

#### 18. ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ

```http
GET /api/notifications/unread-count
Authorization: Bearer {token}
```

**ุงููุตู**: ุงูุญุตูู ุนูู ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": {
        "count": 5
    }
}
```

---

#### 19. ุชุญุฏูุฏ ุฅุดุนุงุฑ ูููุฑูุก

```http
POST /api/notifications/{id}/mark-as-read
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุญุฏูุฏ ุฅุดุนุงุฑ ูุญุฏุฏ ูููุฑูุก

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุฏ ุงูุฅุดุนุงุฑ ูููุฑูุก"
}
```

---

#### 20. ุชุญุฏูุฏ ุฌููุน ุงูุฅุดุนุงุฑุงุช ูููุฑูุกุฉ

```http
POST /api/notifications/mark-all-as-read
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุญุฏูุฏ ุฌููุน ุงูุฅุดุนุงุฑุงุช ูููุฑูุกุฉ

**ุงูุตูุงุญูุงุช**: ุฌููุน ุงููุณุชุฎุฏููู ุงููุณุฌููู (User, Accountant, Admin)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุฏ ุฌููุน ุงูุฅุดุนุงุฑุงุช ูููุฑูุกุฉ"
}
```

---

## ๐จโ๐ผ Routes ุฎุงุตุฉ ุจุงููุญุงุณุจ ูุงููุฏูุฑ (role:admin,accountant)

### ๐ฐ Payment Requests Management

#### 21. ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฏูุน

```http
GET /api/admin/payment-requests
Authorization: Bearer {token}
```

**ุงููุตู**: ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฏูุน ูู ุงููุธุงู

**ุงูุตูุงุญูุงุช**: ุงููุญุงุณุจ (Accountant) ูุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:

-   `status` - (0: pending, 1: approved, 2: rejected)

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "user": {...},
            "amount": 50000,
            "status": 0,
            "created_at": "2025-12-10T09:00:00Z"
        }
    ]
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `403` - ููุณ ูุฏูู ุตูุงุญูุฉ (ูููุณุชุฎุฏููู ุงูุนุงุฏููู)

---

#### 22. ุชุญุฏูุซ ุญุงูุฉ ุทูุจ ุงูุฏูุน

```http
PUT /api/admin/payment-requests/{id}/status
Authorization: Bearer {token}
```

**ุงููุตู**: ูุจูู ุฃู ุฑูุถ ุทูุจ ุฏูุน

**ุงูุตูุงุญูุงุช**: ุงููุญุงุณุจ (Accountant) ูุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**:

```json
{
    "status": 1,
    "reject_reason": "ุณุจุจ ุงูุฑูุถ (ุฅุฐุง ูุงู status = 2)",
    "notes": "ููุงุญุธุงุช ุฅุถุงููุฉ",
    "approved_amount": 50000
}
```

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ูุจูู ุงูุทูุจ ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "status": 1,
        "reviewed_by": 2,
        "reviewed_at": "2025-12-10T09:30:00Z"
    }
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `403` - ููุณ ูุฏูู ุตูุงุญูุฉ (ูููุณุชุฎุฏููู ุงูุนุงุฏููู)
-   `422` - ุฃุฎุทุงุก ุงูุชุญูู ูู ุงูุจูุงูุงุช

---

## ๐ Routes ุฎุงุตุฉ ุจุงููุฏูุฑ ููุท (role:admin)

### ๐บ Live Streams Management

#### 23. ุฅูุดุงุก ุจุซ ูุจุงุดุฑ ุฌุฏูุฏ

```http
POST /api/admin/live-streams
Authorization: Bearer {token}
```

**ุงููุตู**: ุฅูุดุงุก ุจุซ ูุจุงุดุฑ ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**:

```json
{
    "title": "ูุจุงุฑุงุฉ ุงูููู",
    "description": "ูุตู ุงููุจุงุฑุงุฉ",
    "stream_url": "https://example.com/stream.m3u8",
    "thumbnail": "https://example.com/thumb.jpg",
    "category": "match",
    "stream_type": "live",
    "is_active": true,
    "is_featured": true,
    "start_time": "2025-12-10 20:00:00",
    "end_time": "2025-12-10 22:00:00"
}
```

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุจุซ ุจูุฌุงุญ",
    "data": {...}
}
```

**ุฃุฎุทุงุก ูุญุชููุฉ**:

-   `403` - ููุณ ูุฏูู ุตูุงุญูุฉ (ูููุณุชุฎุฏููู ุงูุนุงุฏููู ูุงููุญุงุณุจูู)

---

#### 24. ุชุญุฏูุซ ุจุซ ูุจุงุดุฑ

```http
PUT /api/admin/live-streams/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุญุฏูุซ ุจูุงูุงุช ุจุซ ูุจุงุดุฑ ููุฌูุฏ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**: ููุณ ูุนุงููุงุช ุงูุฅูุดุงุก

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุชุญุฏูุซ ุงูุจุซ ุจูุฌุงุญ",
    "data": {...}
}
```

---

#### 25. ุญุฐู ุจุซ ูุจุงุดุฑ

```http
DELETE /api/admin/live-streams/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุญุฐู ุจุซ ูุจุงุดุฑ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุญุฐู ุงูุจุซ ุจูุฌุงุญ"
}
```

---

### ๐ผ๏ธ Slides Management

#### 26. ุฅูุดุงุก ุณูุงูุฏ ุฌุฏูุฏ

```http
POST /api/admin/slides
Authorization: Bearer {token}
```

**ุงููุตู**: ุฅูุดุงุก ุณูุงูุฏ ุฅุนูุงูู ุฌุฏูุฏ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**:

```json
{
    "title": "ุนุฑุถ ุฎุงุต",
    "image_path": "slides/slide1.jpg",
    "image_mobile": "slides/slide1-mobile.jpg",
    "image_desktop": "slides/slide1-desktop.jpg",
    "link_url": "https://example.com",
    "is_active": true,
    "target_audience": "all",
    "sort_order": 1,
    "start_at": "2025-12-10 00:00:00",
    "end_at": "2025-12-31 23:59:59"
}
```

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฅูุดุงุก ุงูุณูุงูุฏ ุจูุฌุงุญ",
    "data": {...}
}
```

---

#### 27. ุชุญุฏูุซ ุณูุงูุฏ

```http
PUT /api/admin/slides/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุชุญุฏูุซ ุจูุงูุงุช ุณูุงูุฏ ููุฌูุฏ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**: ููุณ ูุนุงููุงุช ุงูุฅูุดุงุก

---

#### 28. ุญุฐู ุณูุงูุฏ

```http
DELETE /api/admin/slides/{id}
Authorization: Bearer {token}
```

**ุงููุตู**: ุญุฐู ุณูุงูุฏ

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

---

### ๐ Notifications Management

#### 29. ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ

```http
POST /api/admin/notifications
Authorization: Bearer {token}
```

**ุงููุตู**: ุฅูุดุงุก ูุฅุฑุณุงู ุฅุดุนุงุฑ ูุฌููุน ุงููุณุชุฎุฏููู ุฃู ูุณุชุฎุฏููู ูุญุฏุฏูู

**ุงูุตูุงุญูุงุช**: ุงููุฏูุฑ (Admin) ููุท

**ุงููุนุงููุงุช**:

```json
{
    "title": "ุฅุดุนุงุฑ ููู",
    "body": "ูุฐุง ุฅุดุนุงุฑ ููู ูุฌููุน ุงููุณุชุฎุฏููู",
    "type": "manual",
    "priority": 1,
    "action_url": "https://example.com",
    "action_text": "ุนุฑุถ ุงูุชูุงุตูู",
    "user_ids": [1, 2, 3]
}
```

**ููุงุญุธุงุช**:

-   ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ `user_ids`ุ ูุชู ุงูุฅุฑุณุงู ูุฌููุน ุงููุณุชุฎุฏููู ุงููุดุทูู
-   ุฅุฐุง ุชู ุชุญุฏูุฏ `user_ids`ุ ูุชู ุงูุฅุฑุณุงู ูููุณุชุฎุฏููู ุงููุญุฏุฏูู ููุท

**ุงูุงุณุชุฌุงุจุฉ**:

```json
{
    "success": true,
    "message": "ุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ุจูุฌุงุญ",
    "data": {
        "id": 1,
        "title": "ุฅุดุนุงุฑ ููู",
        "created_at": "2025-12-10T09:00:00Z"
    }
}
```

---

## ๐ ุฌุฏูู ููุฎุต ุงูุตูุงุญูุงุช

| Route                                         | Public | User                     | Accountant               | Admin       |
| --------------------------------------------- | ------ | ------------------------ | ------------------------ | ----------- |
| `POST /api/auth/login`                        | โ     | โ                       | โ                       | โ          |
| `POST /api/auth/register`                     | โ     | โ                       | โ                       | โ          |
| `GET /api/payment-methods`                    | โ     | โ                       | โ                       | โ          |
| `GET /api/slides`                             | โ     | โ                       | โ                       | โ          |
| `GET /api/live-streams`                       | โ     | โ                       | โ                       | โ          |
| `GET /api/auth/me`                            | โ     | โ                       | โ                       | โ          |
| `POST /api/auth/logout`                       | โ     | โ                       | โ                       | โ          |
| `GET /api/user/profile`                       | โ     | โ                       | โ                       | โ          |
| `PUT /api/user/profile`                       | โ     | โ                       | โ                       | โ          |
| `POST /api/user/sync-subscription`            | โ     | โ                       | โ                       | โ          |
| `GET /api/user/subscription-from-radius`      | โ     | โ                       | โ                       | โ          |
| `GET /api/payment-requests`                   | โ     | โ (ุฎุงุต ุจู)              | โ (ุฌููุน)                | โ (ุฌููุน)   |
| `POST /api/payment-requests`                  | โ     | โ                       | โ                       | โ          |
| `GET /api/payment-requests/{id}`              | โ     | โ (ุฎุงุต ุจู)              | โ (ุฌููุน)                | โ (ุฌููุน)   |
| `GET /api/live-streams/{id}`                  | โ     | โ (ุฅุฐุง ูุงู live_access) | โ (ุฅุฐุง ูุงู live_access) | โ          |
| `POST /api/slides/{id}/track-click`           | โ     | โ                       | โ                       | โ          |
| `GET /api/notifications`                      | โ     | โ (ุฎุงุต ุจู)              | โ (ุฎุงุต ุจู)              | โ (ุฎุงุต ุจู) |
| `GET /api/notifications/unread-count`         | โ     | โ                       | โ                       | โ          |
| `POST /api/notifications/{id}/mark-as-read`   | โ     | โ                       | โ                       | โ          |
| `POST /api/notifications/mark-all-as-read`    | โ     | โ                       | โ                       | โ          |
| `GET /api/admin/payment-requests`             | โ     | โ                       | โ                       | โ          |
| `PUT /api/admin/payment-requests/{id}/status` | โ     | โ                       | โ                       | โ          |
| `POST /api/admin/live-streams`                | โ     | โ                       | โ                       | โ          |
| `PUT /api/admin/live-streams/{id}`            | โ     | โ                       | โ                       | โ          |
| `DELETE /api/admin/live-streams/{id}`         | โ     | โ                       | โ                       | โ          |
| `POST /api/admin/slides`                      | โ     | โ                       | โ                       | โ          |
| `PUT /api/admin/slides/{id}`                  | โ     | โ                       | โ                       | โ          |
| `DELETE /api/admin/slides/{id}`               | โ     | โ                       | โ                       | โ          |
| `POST /api/admin/notifications`               | โ     | โ                       | โ                       | โ          |

---

## ๐ ุดุฑุญ ุงูุตูุงุญูุงุช ุจุงูุชูุตูู

### ๐ค ุงููุณุชุฎุฏู ุงูุนุงุฏู (User - Role: 0)

**ูุง ููููู ูุนูู**:

-   โ ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุณุฌูู
-   โ ุนุฑุถ ูุชุญุฏูุซ ูููู ุงูุดุฎุตู
-   โ ูุฒุงููุฉ ููุฑุงุกุฉ ุจูุงูุงุช ุงูุงุดุชุฑุงู
-   โ ุฅูุดุงุก ุทูุจุงุช ุฏูุน
-   โ ุนุฑุถ ุทูุจุงุช ุงูุฏูุน ุงูุฎุงุตุฉ ุจู ููุท
-   โ ุนุฑุถ ุงูุจุซ ุงููุจุงุดุฑ (ุฅุฐุง ูุงู ูุฏูู `live_access`)
-   โ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจู
-   โ ุชุชุจุน ุงูููุฑุงุช ุนูู ุงูุณูุงูุฏุงุช

**ูุง ูุง ููููู ูุนูู**:

-   โ ุนุฑุถ ุทูุจุงุช ุฏูุน ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู
-   โ ูุจูู/ุฑูุถ ุทูุจุงุช ุงูุฏูุน
-   โ ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ
-   โ ุฅุฏุงุฑุฉ ุงูุณูุงูุฏุงุช
-   โ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช

---

### ๐ฐ ุงููุญุงุณุจ (Accountant - Role: 1)

**ูุง ููููู ูุนูู** (ุจุงูุฅุถุงูุฉ ูุตูุงุญูุงุช ุงููุณุชุฎุฏู):

-   โ ุนุฑุถ **ุฌููุน** ุทูุจุงุช ุงูุฏูุน ูู ุงููุธุงู
-   โ ูุจูู/ุฑูุถ ุทูุจุงุช ุงูุฏูุน
-   โ ุนุฑุถ ุชูุงุตูู ุฃู ุทูุจ ุฏูุน
-   โ ุฅุถุงูุฉ ููุงุญุธุงุช ุนูู ุทูุจุงุช ุงูุฏูุน

**ูุง ูุง ููููู ูุนูู**:

-   โ ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   โ ุฅุฏุงุฑุฉ ุงูุณูุงูุฏุงุช (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   โ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช

---

### ๐ ุงููุฏูุฑ (Admin - Role: 2)

**ูุง ููููู ูุนูู** (ุฌููุน ุงูุตูุงุญูุงุช):

-   โ ุฌููุน ุตูุงุญูุงุช ุงููุญุงุณุจ
-   โ ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   โ ุฅุฏุงุฑุฉ ุงูุณูุงูุฏุงุช (ุฅูุดุงุกุ ุชุนุฏููุ ุญุฐู)
-   โ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ูุฌููุน ุงููุณุชุฎุฏููู ุฃู ูุณุชุฎุฏููู ูุญุฏุฏูู

---

## ๐ ูุธุงู ุงููุตุงุฏูุฉ

### Authentication (ุงููุตุงุฏูุฉ)

ุฌููุน ุงูู routes ุงููุญููุฉ ุชุญุชุงุฌ ุฅูู:

```http
Authorization: Bearer {token}
```

**ููููุฉ ุงูุญุตูู ุนูู Token**:

1. ุชุณุฌูู ุงูุฏุฎูู: `POST /api/auth/login`
2. ุงูุชุณุฌูู: `POST /api/auth/register`

**ูุฏุฉ ุตูุงุญูุฉ Token**:

-   ุญุณุจ ุฅุนุฏุงุฏุงุช Laravel Sanctum
-   ูููู ุชุฎุตูุตูุง ูู `config/sanctum.php`

---

### Authorization (ุงูุตูุงุญูุงุช)

ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนุจุฑ:

1. **Middleware**: `role:admin,accountant`
2. **Policies**: ูู Controllers (ูุซู `$this->authorize()`)

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ูุณุชุฎุฏู ุนุงุฏู ูุฑูุฏ ุฅูุดุงุก ุทูุจ ุฏูุน

```http
POST /api/payment-requests
Authorization: Bearer {user_token}
Content-Type: multipart/form-data

{
    "amount": 50000,
    "currency": "IQD",
    "receipt_file": {file}
}
```

**ุงููุชูุฌุฉ**: โ ูุฌุญ (ุงููุณุชุฎุฏู ููููู ุฅูุดุงุก ุทูุจุงุช ุฏูุน)

---

### ูุซุงู 2: ูุณุชุฎุฏู ุนุงุฏู ูุญุงูู ูุจูู ุทูุจ ุฏูุน

```http
PUT /api/admin/payment-requests/1/status
Authorization: Bearer {user_token}

{
    "status": 1
}
```

**ุงููุชูุฌุฉ**: โ ูุดู - `403 Forbidden` (ุงููุณุชุฎุฏู ุงูุนุงุฏู ูุง ููููู ูุจูู ุทูุจุงุช ุงูุฏูุน)

---

### ูุซุงู 3: ูุญุงุณุจ ููุจู ุทูุจ ุฏูุน

```http
PUT /api/admin/payment-requests/1/status
Authorization: Bearer {accountant_token}

{
    "status": 1,
    "notes": "ุชู ูุจูู ุงูุทูุจ"
}
```

**ุงููุชูุฌุฉ**: โ ูุฌุญ (ุงููุญุงุณุจ ููููู ูุจูู/ุฑูุถ ุทูุจุงุช ุงูุฏูุน)

---

### ูุซุงู 4: ูุญุงุณุจ ูุญุงูู ุฅูุดุงุก ุจุซ ูุจุงุดุฑ

```http
POST /api/admin/live-streams
Authorization: Bearer {accountant_token}

{
    "title": "ูุจุงุฑุงุฉ ุฌุฏูุฏุฉ",
    "stream_url": "..."
}
```

**ุงููุชูุฌุฉ**: โ ูุดู - `403 Forbidden` (ุงููุญุงุณุจ ูุง ููููู ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ)

---

### ูุซุงู 5: ูุฏูุฑ ููุดุฆ ุจุซ ูุจุงุดุฑ

```http
POST /api/admin/live-streams
Authorization: Bearer {admin_token}

{
    "title": "ูุจุงุฑุงุฉ ุฌุฏูุฏุฉ",
    "stream_url": "..."
}
```

**ุงููุชูุฌุฉ**: โ ูุฌุญ (ุงููุฏูุฑ ููููู ุฅุฏุงุฑุฉ ุงูุจุซ ุงููุจุงุดุฑ)

---

## ๐จ ุฑููุฒ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### 401 Unauthorized

**ุงููุนูู**: ุบูุฑ ูุตุฑุญ (ูู ูุชู ุชุณุฌูู ุงูุฏุฎูู ุฃู Token ุบูุฑ ุตุญูุญ)

**ุงูุญู**:

-   ุชุฃูุฏ ูู ุฅุฑุณุงู `Authorization: Bearer {token}`
-   ุชุฃูุฏ ูู ุฃู Token ุตุญูุญ ูุบูุฑ ููุชูู ุงูุตูุงุญูุฉ

---

### 403 Forbidden

**ุงููุนูู**: ููุณ ูุฏูู ุตูุงุญูุฉ ูููุตูู ุฅูู ูุฐุง ุงูููุฑุฏ

**ุงูุญู**:

-   ุชุฃูุฏ ูู ุฃู ูุฏูู ุงูุตูุงุญูุฉ ุงููุทููุจุฉ (User/Accountant/Admin)
-   ุฑุงุฌุน ุฌุฏูู ุงูุตูุงุญูุงุช ุฃุนูุงู

---

### 404 Not Found

**ุงููุนูู**: ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ

**ุงูุญู**:

-   ุชุฃูุฏ ูู ุฃู ID ุตุญูุญ
-   ุชุฃูุฏ ูู ุฃู ุงูููุฑุฏ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

### 422 Unprocessable Entity

**ุงููุนูู**: ุฃุฎุทุงุก ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช

**ุงูุญู**:

-   ุฑุงุฌุน ุฑุณุงุฆู ุงูุฎุทุฃ ูู ุงูุงุณุชุฌุงุจุฉ
-   ุชุฃูุฏ ูู ุฅุฑุณุงู ุฌููุน ุงูุญููู ุงููุทููุจุฉ
-   ุชุฃูุฏ ูู ุตุญุฉ ุชูุณูู ุงูุจูุงูุงุช

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

### 1. Pagination

ุงูุนุฏูุฏ ูู ุงูู endpoints ุชุณุชุฎุฏู Pagination:

```json
{
    "data": [...],
    "meta": {
        "current_page": 1,
        "last_page": 5,
        "per_page": 15,
        "total": 75
    }
}
```

### 2. Filtering

ุจุนุถ ุงูู endpoints ุชุฏุนู Filtering:

-   `GET /api/payment-requests?status=0` - ุนุฑุถ ุงูุทูุจุงุช ุงููุนููุฉ ููุท
-   `GET /api/live-streams?category=match` - ุนุฑุถ ุงููุจุงุฑูุงุช ููุท
-   `GET /api/notifications?unread_only=true` - ุนุฑุถ ุบูุฑ ุงูููุฑูุกุฉ ููุท

### 3. File Upload

ุนูุฏ ุฑูุน ูููุงุช (ูุซู ุฅุดุนุงุฑ ุงูุฏูุน):

-   ุงุณุชุฎุฏู `Content-Type: multipart/form-data`
-   ุงูุญุฌู ุงูุฃูุตู: 5MB
-   ุงูุฃููุงุน ุงููุณููุญุฉ: jpg, jpeg, png, pdf

---

## ๐ ุฑูุงุจุท ูููุฏุฉ

-   [API Documentation](./README_API.md) - ูุซุงุฆู API ุงูุฃุณุงุณูุฉ
-   [Installation Guide](./INSTALLATION.md) - ุฏููู ุงูุชุซุจูุช
-   [Project Structure](./PROJECT_STRUCTURE.md) - ูููู ุงููุดุฑูุน
