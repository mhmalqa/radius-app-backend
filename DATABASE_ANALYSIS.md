# ๐ ุชุญููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุทุจูู ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ูุงูุจุซ ุงููุจุงุดุฑ

## ๐ง ููุฑุฉ ุงููุธุงู ุจุดูู ูุฎุชุตุฑ

ุงูุชุทุจูู ููุฏู ุฅูู:

* ุชูููู ุงููุณุชุฎุฏู ูู ูุนุฑูุฉ ุญุงูุฉ ุงุดุชุฑุงู ุงูุฅูุชุฑูุช ูุงูุฑุตูุฏ ูุงููุฏุฉ ุงููุชุจููุฉ.
* ุชูููุฑ ุฎุฏูุฉ ุจุซ ูุจุงุฑูุงุช / ูููุงุช ููู ุตูุงุญูุงุช ุงููุณุชุฎุฏู.
* ุงุณุชูุจุงู ุฏูุนุงุช ุงูุงุดุชุฑุงู ูุฏููุงู (ุฑูุน ุฅุดุนุงุฑ ุงูุฏูุน ูุงูุตูุฑุฉ ูุงูุจูุงูุงุช).
* ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุฏูุน (ูุจูู โ ุฑูุถ โ ุชุนููู).
* ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนุงูุฉุ ูุฑุฏูุฉุ ุฃู ุขููุฉ ูุฑุชุจุทุฉ ุจุงูุงุดุชุฑุงู.
* ุนุฑุถ ุณูุงูุฏุฑ ุฅุนูุงูู ุฏุงุฎู ุงูุชุทุจูู.

---

# ๐ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุงูููุชุฑุญุฉ

---

## ๐งโโ๏ธ app_users

ููุซู ุญุณุงุจ ุงููุณุชุฎุฏู ุฏุงุฎู ุงูุชุทุจูู.

### ุงูุญููู:

| ุงูุญูู          | ุงูููุน               | ุงููุตู                                  |
| -------------- | ------------------- | -------------------------------------- |
| id             | INT (PK)            | ุฑูู ุชุณูุณูู ูููุณุชุฎุฏู                    |
| username       | VARCHAR(100) UNIQUE | ุงุณู ุงููุณุชุฎุฏู ููุณู ุงููุณุชุฎุฏู ุจุงูู Radius |
| password       | VARCHAR(255)        | ูููุฉ ูุฑูุฑ ุงูุชุทุจูู (ูุดูุฑ)               |
| phone          | VARCHAR(20)         | ุฑูู ุงููุงุชู                             |
| email          | VARCHAR(255)        | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุงุฎุชูุงุฑู)            |
| is_active      | TINYINT(1)          | ูู ุงูุญุณุงุจ ูุนุงู ููุฏุฎูู                  |
| live_access    | TINYINT(1)          | ุตูุงุญูุฉ ูุดุงูุฏุฉ ุงูุจุซ                     |
| role           | TINYINT(1)          | 0 ูุณุชุฎุฏู โ 1 ูุญุงุณุจ โ 2 ูุฏูุฑ            |
| device_token   | VARCHAR(500)        | Token ูุฅุฑุณุงู Push Notifications        |
| language       | VARCHAR(10)          | ุงููุบุฉ ุงูููุถูุฉ (ar, en)                 |
| last_login_at  | DATETIME            | ุขุฎุฑ ูุฑุฉ ุฏุฎูู                           |
| created_at     | TIMESTAMP           | ุชุงุฑูุฎ ุงูุฅูุดุงุก                          |
| updated_at     | TIMESTAMP           | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ                        |

### ููุงุญุธุงุช:

* ูุง ูุชู ุชุฎุฒูู ูุนูููุงุช ุงูุงุดุชุฑุงู ุฏุงุฎู ูุฐุง ุงูุฌุฏูู ุจู ุชูุฌูุจ ูู Radius.
* ุฏูุฑ ุงููุณุชุฎุฏู ูุญุฏุฏ ุตูุงุญูุงุชู ุงูุฅุฏุงุฑูุฉ ุฏุงุฎู ุงูุชุทุจูู.
* `device_token` ูููู ุฃู ูููู NULL ุฅุฐุง ูู ูุณุฌู ุงููุณุชุฎุฏู ุฌูุงุฒู ุจุนุฏ.
* `language` ูุณุงุนุฏ ูู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุจุงููุบุฉ ุงูููุงุณุจุฉ.

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ ููุฑุณ ุนูู `username` ูุชุณุฑูุน ุงูุจุญุซ.
* ุฅุถุงูุฉ ููุฑุณ ุนูู `phone` ุฅุฐุง ูุงู ุณููุณุชุฎุฏู ููุจุญุซ.
* ุฅุถุงูุฉ `email_verified_at` ุฅุฐุง ูุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุทููุจุงู.

---

## ๐งพ payment_requests

ุฎุงุต ุจุชุณุฌูู ุนูููุงุช ุงูุฏูุน ุงููุฏููุฉ.

### ุงูุญููู:

| ุงูุญูู              | ุงูููุน             | ุงููุตู                              |
| ------------------ | ----------------- | ---------------------------------- |
| id                 | INT (PK)          | ุฑูู ุงูุทูุจ                          |
| user_id            | FK โ app_users.id | ุตุงุญุจ ุงูุทูุจ                         |
| amount             | DECIMAL(10,2)     | ูููุฉ ุงูุฏูุน                         |
| currency           | VARCHAR(3)        | ุงูุนููุฉ (IQD, USD) - ุงูุชุฑุงุถู IQD    |
| period_months      | TINYINT           | ุนุฏุฏ ุฃุดูุฑ ุงูุชุฌุฏูุฏ (ุงุฎุชูุงุฑู)         |
| payment_method     | VARCHAR(50)       | ุทุฑููุฉ ุงูุฏูุน (cash, bank, mobile)   |
| transaction_number | VARCHAR(100)      | ุฑูู ุฅุดุนุงุฑ ุงูุฏูุน ุงูููุชูุจ ูุฏูููุง     |
| receipt_file       | VARCHAR(255)      | ุตูุฑุฉ/ PDF ูุฅุดุนุงุฑ ุงูุฏูุน             |
| payment_date       | DATE              | ุชุงุฑูุฎ ุงูุฏูุน ุงููุนูู (ูู ุงูุฅุดุนุงุฑ)    |
| status             | TINYINT           | 0 ููุฏ ุงููุฑุงุฌุนุฉ โ 1 ููุจูู โ 2 ูุฑููุถ |
| reviewed_by        | FK โ app_users.id | ูู ูุงู ุจุงููุฑุงุฌุนุฉ                   |
| reviewed_at        | DATETIME          | ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ                     |
| reject_reason      | TEXT              | ุณุจุจ ุงูุฑูุถ ุฅู ูุฌุฏ                   |
| notes              | TEXT              | ููุงุญุธุงุช ุฅุฏุงุฑูุฉ ุฏุงุฎููุฉ              |
| created_at         | TIMESTAMP         | ุชุงุฑูุฎ ุชูุฏูู ุงูุทูุจ                  |
| updated_at         | TIMESTAMP         | ุขุฎุฑ ุชุนุฏูู                          |

### ุฏูุฑุฉ ุงูุนูู:

1. ุงููุณุชุฎุฏู ูุฑูุน ุงูุฅุดุนุงุฑ.
2. ุงูุทูุจ ูุตุจุญ Pending (status = 0).
3. ูููู ุงููุญุงุณุจ ุจูุฑุงุฌุนุชู.
4. ูุชู ุชุบููุฑู ุฅูู Approved (status = 1) ุฃู Rejected (status = 2).

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ ููุฑุณ ุนูู `status` ู `user_id` ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช.
* ุฅุถุงูุฉ `rejection_code` (ENUM) ูุชูุญูุฏ ุฃุณุจุงุจ ุงูุฑูุถ.
* ุฅุถุงูุฉ `approved_amount` ูู ุญุงูุฉ ูุจูู ุฌุฒุก ูู ุงููุจูุบ ููุท.
* ุฅุถุงูุฉ `auto_approved` (TINYINT) ููุฅุดุนุงุฑุงุช ุงูููุจููุฉ ุชููุงุฆูุงู.

---

## ๐บ live_streams

ุฎุงุต ุจุงูุจุซ ุงููุจุงุดุฑ ูุงููููุงุช ูุงููุจุงุฑูุงุช.

### ุงูุญููู:

| ุงูุญูู       | ุงูููุน             | ุงููุตู                           |
| ----------- | ---------------- | ------------------------------- |
| id          | INT (PK)         |                                  |
| title       | VARCHAR(150)     | ุนููุงู ุงููุจุงุฑุงุฉ/ุงูููุงุฉ           |
| description | TEXT             | ูุตู ุฅุถุงูู                       |
| stream_url  | VARCHAR(500)     | ุฑุงุจุท ุงูุจุซ (HLS, RTMP, etc.)     |
| thumbnail   | VARCHAR(255)     | ุตูุฑุฉ ูุตุบุฑุฉ ูููุจุงุฑุงุฉ/ุงูููุงุฉ      |
| category    | VARCHAR(50)      | ููุน ุงูุจุซ (match, channel, event) |
| is_active   | TINYINT(1)       | ูู ุงูุฑุงุจุท ูุนุงู                  |
| is_featured | TINYINT(1)       | ูู ูุธูุฑ ูู ุงููููุฒุงุช             |
| start_time  | DATETIME         | ุจุฏุงูุฉ ุธููุฑ ุงูุจุซ                 |
| end_time    | DATETIME         | ููุงูุฉ ุฅุชุงุญุฉ ุงูุจุซ                |
| view_count  | INT DEFAULT 0    | ุนุฏุฏ ุงููุดุงูุฏุงุช                   |
| sort_order  | INT DEFAULT 0    | ุชุฑุชูุจ ุงูุนุฑุถ                     |
| created_at  | TIMESTAMP        |                                  |
| updated_at  | TIMESTAMP        |                                  |

### ุทุฑููุฉ ุงูุนุฑุถ:

* ูุธูุฑ ููุท ุงูุฑุงุจุท ุงูุฐู `is_active = 1`.
* ูููู ุงูุชุญูู ุจุงููุบุฉ ุงูุฒูููุฉ ูุธููุฑ ุงูุจุซ.
* `is_featured` ูููุจุงุฑูุงุช ุงููููุฉ ุงูุชู ุชุธูุฑ ูู ุงูุฃุนูู.

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ `stream_type` (live, vod) ููุชูููุฒ ุจูู ุงูุจุซ ุงููุจุงุดุฑ ูุงูููุฏูู.
* ุฅุถุงูุฉ `quality_options` (JSON) ูุฏุนู ุฌูุฏุงุช ูุชุนุฏุฏุฉ.
* ุฅุถุงูุฉ `max_viewers` ูุชุญุฏูุฏ ุนุฏุฏ ุงููุดุงูุฏูู ุงููุณููุญ.
* ุฅุถุงูุฉ ุฌุฏูู `stream_views` ูุชุชุจุน ุงููุดุงูุฏุงุช ุงููุฑุฏูุฉ.

---

## ๐ผ๏ธ slides

ุฎุงุต ุจุงูุณูุงูุฏุฑ ุงูุฅุนูุงูู ุฏุงุฎู ุงูุชุทุจูู.

### ุงูุญููู:

| ุงูุญูู      | ุงูููุน        | ุงููุตู                    |
| ---------- | ------------ | ------------------------ |
| id         | INT (PK)     |                          |
| title      | VARCHAR(150) | ุงุณู ุฏุงุฎูู ููุณูุงูุฏ        |
| image_path | VARCHAR(255) | ูุณุงุฑ ุงูุตูุฑุฉ              |
| link_url   | VARCHAR(255) | ุฑุงุจุท ุนูุฏ ุงูุถุบุท (ุงุฎุชูุงุฑู) |
| is_active  | TINYINT(1)   | ูู ุงูุณูุงูุฏ ููุนู          |
| sort_order | INT          | ุชุฑุชูุจ ุงูุณูุงูุฏุงุช          |
| start_at   | DATETIME     | ุจุฏุงูุฉ ุงูุชุดุบูู            |
| end_at     | DATETIME     | ููุงูุฉ ุงูุนุฑุถ              |
| click_count| INT DEFAULT 0| ุนุฏุฏ ุงูููุฑุงุช              |
| created_at | TIMESTAMP    |                          |
| updated_at | TIMESTAMP    |                          |

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ `target_audience` (ENUM: all, active_users, expired_users) ูุชูุฌูู ุงูุฅุนูุงูุงุช.
* ุฅุถุงูุฉ `image_mobile` ู `image_desktop` ูุฏุนู ุฃุญุฌุงู ูุฎุชููุฉ.

---

# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช

ูุธุงู ุงูุฅุดุนุงุฑุงุช ูููุณู ุฅูู ูุณุชูููู:

---

## notifications

ููุซู ูุญุชูู ุงูุฅุดุนุงุฑ ููุณู.

### ุงูุญููู:

| ุงูุญูู       | ุงูููุน             | ุงููุตู                          |
| ----------- | ----------------- | ------------------------------ |
| id          | INT (PK)          |                                |
| title       | VARCHAR(150)      | ุนููุงู ุงูุฅุดุนุงุฑ                  |
| body        | TEXT              | ูุต ุงูุฅุดุนุงุฑ                     |
| type        | VARCHAR(50)       | ููุน ุงูุฅุดุนุงุฑ (system ุฃู manual) |
| priority    | TINYINT           | 0 ุนุงุฏู โ 1 ููู โ 2 ุนุงุฌู       |
| action_url  | VARCHAR(255)      | ุฑุงุจุท ุนูุฏ ุงูุถุบุท (ุงุฎุชูุงุฑู)       |
| action_text | VARCHAR(50)       | ูุต ุงูุฒุฑ (ูุซุงู: "ุนุฑุถ ุงูุชูุงุตูู") |
| created_by  | FK โ app_users.id | ููุดุฆ ุงูุฅุดุนุงุฑ (ุฅู ูุฌุฏ)          |
| created_at  | TIMESTAMP         |                                |
| updated_at  | TIMESTAMP         |                                |

### ุฃูุซูุฉ ููุฃููุงุน:

* `system_expiry` โ ุฅุดุนุงุฑ ูุฑุจ ุงูุชูุงุก ุงูุงุดุชุฑุงู
* `system_payment_approved` โ ุฅุดุนุงุฑ ูุจูู ุงูุฏูุนุฉ
* `system_payment_rejected` โ ุฅุดุนุงุฑ ุฑูุถ ุงูุฏูุนุฉ
* `system_subscription_expired` โ ุฅุดุนุงุฑ ุงูุชูุงุก ุงูุงุดุชุฑุงู
* `manual_message` โ ุฅุดุนุงุฑ ูู ุงููุฏูุฑ
* `system_maintenance` โ ุฅุดุนุงุฑ ุตูุงูุฉ

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ `icon` (VARCHAR) ูุงุณู ุฃููููุฉ ุงูุฅุดุนุงุฑ.
* ุฅุถุงูุฉ `sound` (VARCHAR) ูุตูุช ุงูุฅุดุนุงุฑ.
* ุฅุถุงูุฉ `badge` (INT) ูุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ูู Badge.

---

## notification_user

ุฌุฏูู ุฑุจุท user โ notification

### ุงูุญููู:

| ุงูุญูู           | ุงูููุน                 | ุงููุตู                    |
| --------------- | --------------------- | ------------------------ |
| id              | INT (PK)              |                          |
| notification_id | FK โ notifications.id |                          |
| user_id         | FK โ app_users.id     |                          |
| is_read         | TINYINT(1) DEFAULT 0  | ูู ุชู ูุฑุงุกุฉ ุงูุฅุดุนุงุฑ      |
| is_sent         | TINYINT(1) DEFAULT 0  | ูู ุชู ุฅุฑุณุงู Push         |
| sent_at         | DATETIME              | ุชุงุฑูุฎ ุงูุฅุฑุณุงู            |
| read_at         | DATETIME              | ุชุงุฑูุฎ ุงููุฑุงุกุฉ            |
| created_at      | TIMESTAMP             |                          |

### ููุฑุฉ ุงูุนูู:

* ุนูุฏ ุฅูุดุงุก ุฅุดุนุงุฑ โ ุชุฎุฒููู ูู notifications
* ุซู ุชูุฒูุน ุงูุฅุดุนุงุฑ ุนูู ุงููุณุชุฎุฏููู ูู notification_user
* `is_sent` ูุณุงุนุฏ ูู ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูุฅุฑุณุงู ุงููุงุดูุฉ

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ ููุฑุณ ูุฑูุจ ุนูู `(user_id, is_read)` ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช.
* ุฅุถุงูุฉ `send_error` (TEXT) ูุชุณุฌูู ุฃุฎุทุงุก ุงูุฅุฑุณุงู.

---

# ๐ user_subscriptions

ูุชุฎุฒูู Snapshot ุฏูุฑู ูุชุงุฑูุฎ ุงูุชูุงุก ุงูุงุดุชุฑุงู.

### ุงูุญููู:

| ุงูุญูู           | ุงูููุน             | ุงููุตู                        |
| --------------- | ----------------- | ---------------------------- |
| id              | INT (PK)          |                              |
| user_id         | FK โ app_users.id |                              |
| radius_username | VARCHAR(100)      | ุงุณู ุงููุณุชุฎุฏู ูู Radius      |
| expiration_at   | DATETIME          | ุชุงุฑูุฎ ุงูุชูุงุก ุงูุงุดุชุฑุงู        |
| balance         | DECIMAL(10,2)     | ุงูุฑุตูุฏ ุงูุญุงูู (ุฅู ูุฌุฏ)       |
| data_limit      | BIGINT            | ุญุฏ ุงูุจูุงูุงุช (ุจุงูุจุงูุช)        |
| data_used       | BIGINT            | ุงูุจูุงูุงุช ุงููุณุชุฎุฏูุฉ           |
| last_synced_at  | DATETIME          | ุขุฎุฑ ูุฑุฉ ุชู ูููุง ุงููุฒุงููุฉ    |
| sync_status     | TINYINT           | 0 ูุงุฌุญ โ 1 ูุดู โ 2 ูุนูู     |
| created_at      | TIMESTAMP         |                              |
| updated_at      | TIMESTAMP         |                              |

### ููุงุฐุง ูุญุชุงุฌูุ

* ูุชุณููู:
  * ุฅุดุนุงุฑุงุช ุงูุชูุงุก ุงูุงุดุชุฑุงู
  * ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุจุฏูู ุงููุตูู ุงููุจุงุดุฑ ููู Radius ุฏุงุฆูุงู
  * ุนุฑุถ ุญุงูุฉ ุงูุงุดุชุฑุงู ุจุณุฑุนุฉ ูู ุงูุชุทุจูู

### ๐ง ุชุญุณููุงุช ููุชุฑุญุฉ:

* ุฅุถุงูุฉ ููุฑุณ ุนูู `expiration_at` ููุจุญุซ ุงูุณุฑูุน ุนู ุงูุงุดุชุฑุงูุงุช ุงูููุชููุฉ.
* ุฅุถุงูุฉ `plan_name` (VARCHAR) ูุงุณู ุงูุฎุทุฉ.
* ุฅุถุงูุฉ `auto_renew` (TINYINT) ุฅุฐุง ูุงู ุงูุชุฌุฏูุฏ ุชููุงุฆูุงู.

---

# ๐ ุฌุฏุงูู ุฅุถุงููุฉ ููุชุฑุญุฉ

---

## login_logs

ูุชุชุจุน ุนูููุงุช ุงูุฏุฎูู ุงููุงุฌุญุฉ ูุงููุฑููุถุฉ.

### ุงูุญููู:

| ุงูุญูู        | ุงูููุน             | ุงููุตู                        |
| ------------ | ----------------- | ---------------------------- |
| id           | INT (PK)          |                              |
| user_id      | FK โ app_users.id | NULL ุฅุฐุง ูุดู ุงูุฏุฎูู          |
| username     | VARCHAR(100)      | ุงุณู ุงููุณุชุฎุฏู ุงููุญุงูู        |
| ip_address   | VARCHAR(45)       | ุนููุงู IP                    |
| user_agent   | VARCHAR(255)      | ูุนูููุงุช ุงููุชุตูุญ/ุงูุชุทุจูู     |
| device_type  | VARCHAR(50)       | (mobile, tablet, desktop)    |
| status       | TINYINT           | 0 ูุดู โ 1 ูุฌุญ               |
| failure_reason | VARCHAR(100)    | ุณุจุจ ุงููุดู (ุฅู ูุฌุฏ)           |
| created_at   | TIMESTAMP         |                              |

### ุงููุงุฆุฏุฉ:

* ุงูุฃูุงู: ุชุชุจุน ูุญุงููุงุช ุงูุฏุฎูู ุงููุดุจููุฉ
* ุงูุฅุญุตุงุฆูุงุช: ูุนุฑูุฉ ุฃููุงุช ุงูุฏุฎูู ุงูุดุงุฆุนุฉ
* ุงูุฏุนู ุงูููู: ุชุชุจุน ูุดุงูู ุงููุณุชุฎุฏููู

---

## device_tokens

ูุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ ุงููุณุชุฎุฏููู ุงููุชุนุฏุฏุฉ (ุงุฎุชูุงุฑู - ุจุฏูู ูู device_token ูู app_users).

### ุงูุญููู:

| ุงูุญูู        | ุงูููุน             | ุงููุตู                    |
| ------------ | ----------------- | ------------------------ |
| id           | INT (PK)          |                          |
| user_id      | FK โ app_users.id |                          |
| device_token | VARCHAR(500)      | Token ุงูุฌูุงุฒ             |
| device_type  | VARCHAR(20)       | (ios, android, web)      |
| device_name  | VARCHAR(100)      | ุงุณู ุงูุฌูุงุฒ (ุงุฎุชูุงุฑู)     |
| is_active    | TINYINT(1)        | ูู ุงูุฌูุงุฒ ูุดุท             |
| last_used_at | DATETIME          | ุขุฎุฑ ุงุณุชุฎุฏุงู              |
| created_at   | TIMESTAMP         |                          |
| updated_at   | TIMESTAMP         |                          |

### ุงููุงุฆุฏุฉ:

* ุฏุนู ุชุณุฌูู ุงูุฏุฎูู ูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ
* ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฌููุน ุงูุฃุฌูุฒุฉ
* ุฅุฏุงุฑุฉ ุงูุฃุฌูุฒุฉ (ุฅูุบุงุก ุชูุนูู ุฌูุงุฒ ูุนูู)

---

## payment_methods

ูุฅุฏุงุฑุฉ ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ (ุงุฎุชูุงุฑู).

### ุงูุญููู:

| ุงูุญูู        | ุงูููุน        | ุงููุตู                    |
| ------------ | ------------ | ------------------------ |
| id           | INT (PK)     |                          |
| name         | VARCHAR(50)  | ุงุณู ุทุฑููุฉ ุงูุฏูุน          |
| name_ar      | VARCHAR(50)  | ุงูุงุณู ุจุงูุนุฑุจูุฉ           |
| icon         | VARCHAR(255) | ุฃููููุฉ ุทุฑููุฉ ุงูุฏูุน       |
| is_active    | TINYINT(1)   | ูู ุงูุทุฑููุฉ ููุนูุฉ         |
| instructions | TEXT         | ุชุนูููุงุช ุงูุฏูุน            |
| sort_order   | INT          | ุชุฑุชูุจ ุงูุนุฑุถ              |
| created_at   | TIMESTAMP    |                          |
| updated_at   | TIMESTAMP    |                          |

### ุงููุงุฆุฏุฉ:

* ุฅุฏุงุฑุฉ ูุฑูุฉ ูุทุฑู ุงูุฏูุน
* ุฅุถุงูุฉ/ุฅุฒุงูุฉ ุทุฑู ุฏูุน ุจุณูููุฉ
* ุนุฑุถ ุชุนูููุงุช ููู ุทุฑููุฉ

---

# ๐งฉ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู (ERD ูุตู)

```
app_users 1 ---- n payment_requests  
app_users 1 ---- n notification_user
app_users 1 ---- n login_logs
app_users 1 ---- n device_tokens (ุงุฎุชูุงุฑู)
app_users 1 ---- n user_subscriptions
app_users 1 ---- n notifications (created_by)

notifications 1 ---- n notification_user

payment_methods 1 ---- n payment_requests (ุงุฎุชูุงุฑู)
```

---

# ๐ ุงูููุงุฑุณ ุงูููุชุฑุญุฉ (Indexes)

ูุชุญุณูู ุงูุฃุฏุงุก:

```sql
-- app_users
CREATE INDEX idx_username ON app_users(username);
CREATE INDEX idx_phone ON app_users(phone);
CREATE INDEX idx_role ON app_users(role);

-- payment_requests
CREATE INDEX idx_user_status ON payment_requests(user_id, status);
CREATE INDEX idx_status ON payment_requests(status);
CREATE INDEX idx_created_at ON payment_requests(created_at);

-- live_streams
CREATE INDEX idx_active_featured ON live_streams(is_active, is_featured);
CREATE INDEX idx_start_end ON live_streams(start_time, end_time);

-- notifications
CREATE INDEX idx_type ON notifications(type);
CREATE INDEX idx_created_at ON notifications(created_at);

-- notification_user
CREATE INDEX idx_user_read ON notification_user(user_id, is_read);
CREATE INDEX idx_notification ON notification_user(notification_id);

-- user_subscriptions
CREATE INDEX idx_expiration ON user_subscriptions(expiration_at);
CREATE INDEX idx_user_sync ON user_subscriptions(user_id, last_synced_at);

-- login_logs
CREATE INDEX idx_user_created ON login_logs(user_id, created_at);
CREATE INDEX idx_ip ON login_logs(ip_address);
```

---

# โ๏ธ ููุงุญุธุงุช ุฃูููุฉ ูููุฉ

1. **ูููุงุช ุงููุฑูุฑ**: ูุฌุจ ุชุดููุฑูุง ุจุงุณุชุฎุฏุงู `bcrypt` ุฃู `argon2`.
2. **device_token**: ูุฌุจ ุชุดููุฑูุง ุฅุฐุง ูุงูุช ุชุญุชูู ุนูู ูุนูููุงุช ุญุณุงุณุฉ.
3. **receipt_file**: ูุฌุจ ุงูุชุญูู ูู ููุน ุงูููู ูุญุฌูู ูุจู ุงูุฑูุน.
4. **stream_url**: ูุฌุจ ุงูุชุญูู ูู ุตุญุฉ ุงูุฑูุงุจุท ูุจู ุงูุญูุธ.
5. **SQL Injection**: ุงุณุชุฎุฏุงู Prepared Statements ุฏุงุฆูุงู.
6. **XSS**: ุชูุธูู ุงููุฏุฎูุงุช ูุจู ุงูุญูุธ.
7. **Rate Limiting**: ุนูู ุนูููุงุช ุงูุฏุฎูู ูุงูุฏูุน.

---

# ๐ ูุฒุงููุฉ ูุน Radius

## ุงุณุชุฑุงุชูุฌูุฉ ุงููุฒุงููุฉ:

1. **ูุฒุงููุฉ ุฏูุฑูุฉ**: ูู ุณุงุนุฉ ุฃู ููููุงู ุนุจุฑ Cron Job.
2. **ูุฒุงููุฉ ุนูุฏ ุงูุทูุจ**: ุนูุฏ ูุชุญ ุงูุชุทุจูู ุฃู ุตูุญุฉ ุงูุงุดุชุฑุงู.
3. **ูุฒุงููุฉ ุจุนุฏ ุงูุฏูุน**: ุจุนุฏ ูุจูู ุทูุจ ุฏูุน ูุจุงุดุฑุฉ.

## ุฌุฏูู sync_logs (ุงุฎุชูุงุฑู):

| ุงูุญูู         | ุงูููุน        | ุงููุตู                    |
| ------------- | ------------ | ------------------------ |
| id            | INT (PK)     |                          |
| user_id       | INT          | NULL ุฅุฐุง ูุงูุช ูุฒุงููุฉ ุนุงูุฉ |
| sync_type     | VARCHAR(50)  | (user, all, scheduled)   |
| status        | TINYINT      | 0 ูุฌุญ โ 1 ูุดู            |
| error_message | TEXT         | ุฑุณุงูุฉ ุงูุฎุทุฃ              |
| records_synced| INT          | ุนุฏุฏ ุงูุณุฌูุงุช ุงููุญุฏุซุฉ      |
| created_at    | TIMESTAMP    |                          |

---

# ๐ ุฌุฏุงูู ุฅุญุตุงุฆูุงุช (ุงุฎุชูุงุฑู ูููุณุชูุจู)

## analytics_events

ูุชุชุจุน ุฃุญุฏุงุซ ุงูุชุทุจูู:

| ุงูุญูู      | ุงูููุน        | ุงููุตู                    |
| ---------- | ------------ | ------------------------ |
| id         | INT (PK)     |                          |
| user_id    | INT          | NULL ููุฃุญุฏุงุซ ุงูุนุงูุฉ      |
| event_type | VARCHAR(50)  | (login, payment, stream) |
| event_data | JSON         | ุจูุงูุงุช ุฅุถุงููุฉ           |
| created_at | TIMESTAMP    |                          |

---

# ๐ฏ ุงูุฎูุงุตุฉ ูุงูุชุญุณููุงุช

## โ ููุงุท ุงูููุฉ ูู ุงูุชุตููู ุงูุญุงูู:

* ุจุณูุท ูุณูู ุงูููู
* ูุงุจู ููุชูุณุน
* ููุจู ูุชุทูุจุงุช ุงูุฏูุน ุงููุฏูู
* ูุญุงูุธ ุนูู ุฅุดุนุงุฑุงุช ุฏูููุฉ
* ูุฏุนู ุจุซ ูุจุงุดุฑ
* ููุงุณุจ ูุชุทุจููุงุช ุงูุฌูุงู

## ๐ง ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ:

1. **ุฅุถุงูุฉ ุญููู ููููุฏุฉ**:
   - `email`, `device_token`, `language` ูู `app_users`
   - `currency`, `payment_method`, `payment_date` ูู `payment_requests`
   - `thumbnail`, `category`, `view_count` ูู `live_streams`
   - `priority`, `action_url` ูู `notifications`

2. **ุฌุฏุงูู ุฅุถุงููุฉ ูููุฉ**:
   - `login_logs` ููุฃูุงู
   - `device_tokens` ูุฏุนู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ
   - `payment_methods` ูุฅุฏุงุฑุฉ ูุฑูุฉ

3. **ุชุญุณููุงุช ุงูุฃุฏุงุก**:
   - ุฅุถุงูุฉ ุงูููุงุฑุณ ุงููุฐููุฑุฉ ุฃุนูุงู
   - ุงุณุชุฎุฏุงู Soft Deletes ุฅุฐุง ูุฒู ุงูุฃูุฑ

4. **ุชุญุณููุงุช ุงูุฃูุงู**:
   - ุชุดููุฑ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
   - ุงูุชุญูู ูู ุงููุฏุฎูุงุช
   - Rate Limiting

5. **ููุฒุงุช ูุณุชูุจููุฉ**:
   - ุฌุฏูู `analytics_events` ููุฅุญุตุงุฆูุงุช
   - ุฌุฏูู `sync_logs` ูุชุชุจุน ุงููุฒุงููุฉ
   - ุฏุนู Multi-language ูู ุงููุญุชูู

---

# ๐ ููุงุญุธุงุช ููุงุฆูุฉ

* ูุฐุง ุงูุชุตููู ูุงุจู ููุชุทููุฑ ุงูุชุฏุฑูุฌู - ูุง ุญุงุฌุฉ ูุชูููุฐ ูู ุงูุฌุฏุงูู ุฏูุนุฉ ูุงุญุฏุฉ.
* ุงุจุฏุฃ ุจุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุซู ุฃุถู ุงูุฌุฏุงูู ุงูุงุฎุชูุงุฑูุฉ ุญุณุจ ุงูุญุงุฌุฉ.
* ุฑุงุฌุน ูุชุทูุจุงุช Radius API ูุจู ุชูููุฐ ุงููุฒุงููุฉ.
* ุงุฎุชุจุฑ ุงูุฃุฏุงุก ูุน ุจูุงูุงุช ุญููููุฉ ูุฃุถู ููุงุฑุณ ุฅุถุงููุฉ ุญุณุจ ุงูุญุงุฌุฉ.

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2024  
**ุขุฎุฑ ุชุญุฏูุซ**: 2024

